var express = require("express");
var linetwork = require("linetwork");
;
module.exports = (function () {
    function NetRouter(conf) {
        this.NetManager = new linetwork(conf);
    }
    NetRouter.prototype.connect = function (recovery) {
        this.NetManager.connection(recovery);
    };
    NetRouter.prototype.Router = function () {
        var NetManager = this.NetManager;
        var Router = express.Router();
        Router.get('/', function (req, res) {
            res.send('Manager home page');
        });
        Router.get('/connect', function (req, res) {
            this.NetManager.connection(req.body.recovery).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.get('/list', function (req, res) {
            res.send(this.NetManager.networks());
        });
        Router.get('/mobile', function (req, res) {
            res.send('Manager mobile page');
        });
        Router.get('/mobile/providers', function (req, res) {
            res.send(this.NetManager.mobileproviders());
        });
        Router.get('/mobile/providers/country', function (req, res) {
            var providers = this.NetManager.mobileproviders();
            res.send(providers.country(req.body.country));
        });
        Router.get('/recovery', function (req, res) {
            this.NetManager.recovery().then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.post('/configuration', function (req, res) {
            console.log('Manager home page');
        });
        Router.get('/wifi', function (req, res) {
            res.send('Manager wifi page');
        });
        Router.get('/wifi/wpa', function (req, res) {
            var wpamanager = this.NetManager.wpamanager();
            res.send(wpamanager.list);
        });
        Router.post('/wifi/wpa/add', function (req, res) {
            var wpamanager = this.NetManager.wpamanager();
            wpamanager.add(req.body.ssid, req.body.password, req.body.priority).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.post('/wifi/wpa/remove', function (req, res) {
            var wpamanager = this.NetManager.wpamanager();
            wpamanager.remove(req.body.ssid).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        return Router;
    };
    return NetRouter;
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiY29ubmVjdCIsIlJvdXRlciJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBTyxTQUFTLFdBQVcsV0FBVyxDQUFDLENBQUM7QUEwQnZDLENBQUM7QUFTRixpQkFBUztJQUVMLG1CQUFZLElBQWM7UUFDdEJBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBRTFDQSxDQUFDQTtJQUVELDJCQUFPLEdBQVAsVUFBUSxRQUFRO1FBQ1pDLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLFVBQVVBLENBQUNBLFFBQVFBLENBQUNBLENBQUFBO0lBQ3hDQSxDQUFDQTtJQUVELDBCQUFNLEdBQU47UUFDSUMsSUFBSUEsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0E7UUFDakNBLElBQUlBLE1BQU1BLEdBQUdBLE9BQU9BLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO1FBSTlCQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxFQUFFQSxVQUFTQSxHQUFHQSxFQUFFQSxHQUFHQTtZQUM3QixHQUFHLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDbEMsQ0FBQyxDQUFDQSxDQUFDQTtRQUNIQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFVQSxFQUFFQSxVQUFTQSxHQUFHQSxFQUFFQSxHQUFHQTtZQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDL0MsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQzNCLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDTCxHQUFHLENBQUMsSUFBSSxDQUFDLEVB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QUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUMzQixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQ0wsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQzVCLENBQUMsQ0FBQyxDQUFBO1FBRU4sQ0FBQyxDQUFDQSxDQUFDQTtRQUNIQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEVBQUVBLFVBQVNBLEdBQUdBLEVBQUVBLEdBQUdBO1lBQzdDLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDOUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQzNCLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDTCxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDNUIsQ0FBQyxDQUFDLENBQUE7UUFHTixDQUFDLENBQUNBLENBQUNBO1FBRUhBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBO0lBQ2xCQSxDQUFDQTtJQUVMLGdCQUFDO0FBQUQsQ0E1RlMsQUE0RlIsR0FBQSxDQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGxpbmV0d29yayA9IHJlcXVpcmUoXCJsaW5ldHdvcmtcIik7XG5cbmludGVyZmFjZSBJUHJvdmlkZXIge1xuXG4gICAgbGFiZWw/OiBzdHJpbmc7XG4gICAgYXBuOiBzdHJpbmc7XG4gICAgcGhvbmU/OiBzdHJpbmdcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcblxufVxuXG5pbnRlcmZhY2UgSU1vYmlsZSB7XG4gICAgcHJvdmlkZXI/OiBJUHJvdmlkZXI7XG4gICAgb3B0aW9ucz86IHtcbiAgICAgICAgdmVyYm9zZT86IGJvb2xlYW47XG4gICAgICAgIHd2ZGlhbEZpbGU/OiBzdHJpbmc7XG4gICAgICAgIGRldj86IGFueTtcbiAgICAgICAgaWZPZmZsaW5lPzogYm9vbGVhbjtcbiAgICAgICAgcmV0cnk/OiBib29sZWFuO1xuICAgIH07XG59XG5pbnRlcmZhY2UgSUhvc3RhcGRjZiB7XG4gICAgZHJpdmVyPzogc3RyaW5nO1xuICAgIHNzaWQ6IHN0cmluZztcbiAgICB3cGFfcGFzc3BocmFzZTogYW55O1xufTtcbmludGVyZmFjZSBDbGFzc09wdCB7XG4gICAgcG9ydDogbnVtYmVyO1xuICAgIHJlY292ZXJ5X2ludGVyZmFjZT86IHN0cmluZztcbiAgICBtb2JpbGU/OiBJTW9iaWxlO1xuICAgIGhvc3RhcGQ/OiBJSG9zdGFwZGNmO1xuICAgIHdwYXN1cHBsaWNhbnRfcGF0aD86IHN0cmluZztcbn1cblxuZXhwb3J0ID0gY2xhc3MgTmV0Um91dGVyIHtcbiAgICBOZXRNYW5hZ2VyO1xuICAgIGNvbnN0cnVjdG9yKGNvbmY6IENsYXNzT3B0KSB7XG4gICAgICAgIHRoaXMuTmV0TWFuYWdlciA9IG5ldyBsaW5ldHdvcmsoY29uZik7XG5cbiAgICB9XG5cbiAgICBjb25uZWN0KHJlY292ZXJ5KSB7XG4gICAgICAgIHRoaXMuTmV0TWFuYWdlci5jb25uZWN0aW9uKHJlY292ZXJ5KVxuICAgIH1cblxuICAgIFJvdXRlcigpIHtcbiAgICAgICAgbGV0IE5ldE1hbmFnZXIgPSB0aGlzLk5ldE1hbmFnZXI7XG4gICAgICAgIGxldCBSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIGRlZmluZSB0aGUgaG9tZSBwYWdlIHJvdXRlXG4gICAgICAgIFJvdXRlci5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgcmVzLnNlbmQoJ01hbmFnZXIgaG9tZSBwYWdlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIuZ2V0KCcvY29ubmVjdCcsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICB0aGlzLk5ldE1hbmFnZXIuY29ubmVjdGlvbihyZXEuYm9keS5yZWNvdmVyeSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG9rOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgUm91dGVyLmdldCgnL2xpc3QnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgcmVzLnNlbmQodGhpcy5OZXRNYW5hZ2VyLm5ldHdvcmtzKCkpO1xuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgUm91dGVyLmdldCgnL21vYmlsZScsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICByZXMuc2VuZCgnTWFuYWdlciBtb2JpbGUgcGFnZScpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIuZ2V0KCcvbW9iaWxlL3Byb3ZpZGVycycsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICByZXMuc2VuZCh0aGlzLk5ldE1hbmFnZXIubW9iaWxlcHJvdmlkZXJzKCkpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIuZ2V0KCcvbW9iaWxlL3Byb3ZpZGVycy9jb3VudHJ5JywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIGxldCBwcm92aWRlcnMgPSB0aGlzLk5ldE1hbmFnZXIubW9iaWxlcHJvdmlkZXJzKCk7XG4gICAgICAgICAgICByZXMuc2VuZChwcm92aWRlcnMuY291bnRyeShyZXEuYm9keS5jb3VudHJ5KSk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5nZXQoJy9yZWNvdmVyeScsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICB0aGlzLk5ldE1hbmFnZXIucmVjb3ZlcnkoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IHRydWUgfSk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG9rOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIucG9zdCgnL2NvbmZpZ3VyYXRpb24nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01hbmFnZXIgaG9tZSBwYWdlJyk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5nZXQoJy93aWZpJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIHJlcy5zZW5kKCdNYW5hZ2VyIHdpZmkgcGFnZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBSb3V0ZXIuZ2V0KCcvd2lmaS93cGEnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgbGV0IHdwYW1hbmFnZXIgPSB0aGlzLk5ldE1hbmFnZXIud3BhbWFuYWdlcigpO1xuICAgICAgICAgICAgcmVzLnNlbmQod3BhbWFuYWdlci5saXN0KTtcblxuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIucG9zdCgnL3dpZmkvd3BhL2FkZCcsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICBsZXQgd3BhbWFuYWdlciA9IHRoaXMuTmV0TWFuYWdlci53cGFtYW5hZ2VyKCk7XG4gICAgICAgICAgICB3cGFtYW5hZ2VyLmFkZChyZXEuYm9keS5zc2lkLCByZXEuYm9keS5wYXNzd29yZCwgcmVxLmJvZHkucHJpb3JpdHkpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICB9KTtcbiAgICAgICAgUm91dGVyLnBvc3QoJy93aWZpL3dwYS9yZW1vdmUnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgbGV0IHdwYW1hbmFnZXIgPSB0aGlzLk5ldE1hbmFnZXIud3BhbWFuYWdlcigpO1xuICAgICAgICAgICAgd3BhbWFuYWdlci5yZW1vdmUocmVxLmJvZHkuc3NpZCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG9rOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogZmFsc2UgfSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIFJvdXRlcjtcbiAgICB9XG5cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
