"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var express = require("express");
var linetwork = require("linetwork");
;
module.exports = (function (_super) {
    __extends(NetManager, _super);
    function NetManager(conf) {
        _super.call(this, conf);
    }
    NetManager.prototype.Router = function () {
        var NetManager = this;
        var Router = express.Router();
        Router.get('/connect', function (req, res) {
            NetManager.connection(req.body.recovery).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.get('/list', function (req, res) {
            NetManager.networks().then(function (n) {
                res.send(n);
            }).then(function (err) {
                res.send(err);
            });
        });
        Router.get('/mobile/providers', function (req, res) {
            res.send(NetManager.mobileproviders());
        });
        Router.get('/mobile/providers/country/:country', function (req, res) {
            var providers = NetManager.mobileproviders();
            res.send(providers.country(req.params.country));
        });
        Router.get('/recovery', function (req, res) {
            NetManager.recovery().then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.post('/configuration', function (req, res) {
            console.log('Manager home page');
        });
        Router.get('/wifi/wpa', function (req, res) {
            var wpamanager = NetManager.wpamanager();
            res.send(wpamanager.listwpa);
        });
        Router.post('/wifi/wpa/add', function (req, res) {
            var wpamanager = NetManager.wpamanager();
            wpamanager.addwpa(req.body.ssid, req.body.password, req.body.priority).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.post('/wifi/wpa/remove', function (req, res) {
            var wpamanager = NetManager.wpamanager();
            wpamanager.removewpa(req.body.ssid).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        return Router;
    };
    return NetManager;
}(linetwork));

//# sourceMappingURL=data:application/json;base64,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LENBdEZpQyxTQUFTLEVBc0YxQyxDQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGxpbmV0d29yayA9IHJlcXVpcmUoXCJsaW5ldHdvcmtcIik7XG5cbmludGVyZmFjZSBJUHJvdmlkZXIge1xuXG4gICAgbGFiZWw/OiBzdHJpbmc7XG4gICAgYXBuOiBzdHJpbmc7XG4gICAgcGhvbmU/OiBzdHJpbmdcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcblxufVxuXG5pbnRlcmZhY2UgSU1vYmlsZSB7XG4gICAgcHJvdmlkZXI6IElQcm92aWRlcjtcbiAgICBkZXZpY2U/OiBhbnk7XG4gICAgY29uZmlnRmlsZVBhdGg/OiBzdHJpbmc7XG59XG5pbnRlcmZhY2UgSUhvc3RhcGRjZiB7XG4gICAgZHJpdmVyPzogc3RyaW5nO1xuICAgIHNzaWQ6IHN0cmluZztcbiAgICB3cGFfcGFzc3BocmFzZTogYW55O1xufTtcbmludGVyZmFjZSBDbGFzc09wdCB7XG4gICAgd2lmaV9pbnRlcmZhY2U/OiBzdHJpbmc7XG4gICAgbW9iaWxlPzogSU1vYmlsZTtcbiAgICBob3N0YXBkPzogSUhvc3RhcGRjZjtcbiAgICB3cGFzdXBwbGljYW50X3BhdGg/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCA9IGNsYXNzIE5ldE1hbmFnZXIgZXh0ZW5kcyBsaW5ldHdvcmsge1xuICAgIE5ldE1hbmFnZXI7XG4gICAgY29uc3RydWN0b3IoY29uZjogQ2xhc3NPcHQpIHtcbiAgICAgICAgc3VwZXIoY29uZik7XG5cbiAgICB9XG5cblxuICAgIFJvdXRlcigpIHtcbiAgICAgICAgbGV0IE5ldE1hbmFnZXIgPSB0aGlzO1xuICAgICAgICBsZXQgUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBkZWZpbmUgdGhlIGhvbWUgcGFnZSByb3V0ZVxuXG4gICAgICAgIFxuICAgICAgICBSb3V0ZXIuZ2V0KCcvY29ubmVjdCcsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICBOZXRNYW5hZ2VyLmNvbm5lY3Rpb24ocmVxLmJvZHkucmVjb3ZlcnkpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5nZXQoJy9saXN0JywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIE5ldE1hbmFnZXIubmV0d29ya3MoKS50aGVuKGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZChuKTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSk7XG5cblxuXG5cbiAgICAgICAgUm91dGVyLmdldCgnL21vYmlsZS9wcm92aWRlcnMnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgcmVzLnNlbmQoTmV0TWFuYWdlci5tb2JpbGVwcm92aWRlcnMoKSk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5nZXQoJy9tb2JpbGUvcHJvdmlkZXJzL2NvdW50cnkvOmNvdW50cnknLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgbGV0IHByb3ZpZGVycyA9IE5ldE1hbmFnZXIubW9iaWxlcHJvdmlkZXJzKCk7XG4gICAgICAgICAgICByZXMuc2VuZChwcm92aWRlcnMuY291bnRyeShyZXEucGFyYW1zLmNvdW50cnkpKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgUm91dGVyLmdldCgnL3JlY292ZXJ5JywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIE5ldE1hbmFnZXIucmVjb3ZlcnkoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IHRydWUgfSk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG9rOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIucG9zdCgnL2NvbmZpZ3VyYXRpb24nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01hbmFnZXIgaG9tZSBwYWdlJyk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgUm91dGVyLmdldCgnL3dpZmkvd3BhJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIGxldCB3cGFtYW5hZ2VyID0gTmV0TWFuYWdlci53cGFtYW5hZ2VyKCk7XG4gICAgICAgICAgICByZXMuc2VuZCh3cGFtYW5hZ2VyLmxpc3R3cGEpO1xuXG5cbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5wb3N0KCcvd2lmaS93cGEvYWRkJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIGxldCB3cGFtYW5hZ2VyID0gTmV0TWFuYWdlci53cGFtYW5hZ2VyKCk7XG4gICAgICAgICAgICB3cGFtYW5hZ2VyLmFkZHdwYShyZXEuYm9keS5zc2lkLCByZXEuYm9keS5wYXNzd29yZCwgcmVxLmJvZHkucHJpb3JpdHkpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICB9KTtcbiAgICAgICAgUm91dGVyLnBvc3QoJy93aWZpL3dwYS9yZW1vdmUnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgbGV0IHdwYW1hbmFnZXIgPSBOZXRNYW5hZ2VyLndwYW1hbmFnZXIoKTtcbiAgICAgICAgICAgIHdwYW1hbmFnZXIucmVtb3Zld3BhKHJlcS5ib2R5LnNzaWQpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gUm91dGVyO1xuICAgIH1cblxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
