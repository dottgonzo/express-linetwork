"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var express = require("express");
var linetwork = require("linetwork");
;
module.exports = (function (_super) {
    __extends(NetManager, _super);
    function NetManager(conf) {
        _super.call(this, conf);
    }
    NetManager.prototype.Router = function () {
        var NetManager = this;
        var Router = express.Router();
        Router.get('/connect', function (req, res) {
            NetManager.connection(req.body.recovery).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.get('/list', function (req, res) {
            res.send(NetManager.networks());
        });
        Router.get('/mobile/providers', function (req, res) {
            res.send(NetManager.mobileproviders());
        });
        Router.get('/mobile/providers/country', function (req, res) {
            var providers = NetManager.mobileproviders();
            res.send(providers.country(req.body.country));
        });
        Router.get('/recovery', function (req, res) {
            NetManager.recovery().then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.post('/configuration', function (req, res) {
            console.log('Manager home page');
        });
        Router.get('/wifi/wpa', function (req, res) {
            var wpamanager = NetManager.wpamanager();
            res.send(wpamanager.listwpa);
        });
        Router.post('/wifi/wpa/add', function (req, res) {
            var wpamanager = NetManager.wpamanager();
            wpamanager.addwpa(req.body.ssid, req.body.password, req.body.priority).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        Router.post('/wifi/wpa/remove', function (req, res) {
            var wpamanager = NetManager.wpamanager();
            wpamanager.removewpa(req.body.ssid).then(function () {
                res.send({ ok: true });
            }).catch(function () {
                res.send({ ok: false });
            });
        });
        return Router;
    };
    return NetManager;
}(linetwork));

//# sourceMappingURL=data:application/json;base64,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QztZQUN6QyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUN4RSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7WUFDM0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUNMLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUM1QixDQUFDLENBQUMsQ0FBQTtRQUVOLENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxVQUFTLEdBQUcsRUFBRSxHQUFHO1lBQzdDLElBQUksVUFBVSxHQUFHLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUN6QyxVQUFVLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUNyQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7WUFDM0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUNMLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUM1QixDQUFDLENBQUMsQ0FBQTtRQUVOLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRUwsaUJBQUM7QUFBRCxDQWpGUyxBQWlGUixDQWpGaUMsU0FBUyxFQWlGMUMsQ0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBsaW5ldHdvcmsgPSByZXF1aXJlKFwibGluZXR3b3JrXCIpO1xuXG5pbnRlcmZhY2UgSVByb3ZpZGVyIHtcblxuICAgIGxhYmVsPzogc3RyaW5nO1xuICAgIGFwbjogc3RyaW5nO1xuICAgIHBob25lPzogc3RyaW5nXG4gICAgdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgcGFzc3dvcmQ/OiBzdHJpbmc7XG5cbn1cblxuaW50ZXJmYWNlIElNb2JpbGUge1xuICAgIHByb3ZpZGVyOiBJUHJvdmlkZXI7XG4gICAgZGV2aWNlPzogYW55O1xuICAgIGNvbmZpZ0ZpbGVQYXRoPzogc3RyaW5nO1xufVxuaW50ZXJmYWNlIElIb3N0YXBkY2Yge1xuICAgIGRyaXZlcj86IHN0cmluZztcbiAgICBzc2lkOiBzdHJpbmc7XG4gICAgd3BhX3Bhc3NwaHJhc2U6IGFueTtcbn07XG5pbnRlcmZhY2UgQ2xhc3NPcHQge1xuICAgIHdpZmlfaW50ZXJmYWNlPzogc3RyaW5nO1xuICAgIG1vYmlsZT86IElNb2JpbGU7XG4gICAgaG9zdGFwZD86IElIb3N0YXBkY2Y7XG4gICAgd3Bhc3VwcGxpY2FudF9wYXRoPzogc3RyaW5nO1xufVxuXG5leHBvcnQgPSBjbGFzcyBOZXRNYW5hZ2VyIGV4dGVuZHMgbGluZXR3b3Jre1xuICAgIE5ldE1hbmFnZXI7XG4gICAgY29uc3RydWN0b3IoY29uZjogQ2xhc3NPcHQpIHtcbiAgICAgICAgc3VwZXIoY29uZik7XG5cbiAgICB9XG5cblxuICAgIFJvdXRlcigpIHtcbiAgICAgICAgbGV0IE5ldE1hbmFnZXIgPSB0aGlzO1xuICAgICAgICBsZXQgUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBkZWZpbmUgdGhlIGhvbWUgcGFnZSByb3V0ZVxuXG4gICAgICAgIFxuICAgICAgICBSb3V0ZXIuZ2V0KCcvY29ubmVjdCcsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICBOZXRNYW5hZ2VyLmNvbm5lY3Rpb24ocmVxLmJvZHkucmVjb3ZlcnkpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5nZXQoJy9saXN0JywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIHJlcy5zZW5kKE5ldE1hbmFnZXIubmV0d29ya3MoKSk7XG4gICAgICAgIH0pO1xuXG5cblxuXG4gICAgICAgIFJvdXRlci5nZXQoJy9tb2JpbGUvcHJvdmlkZXJzJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIHJlcy5zZW5kKE5ldE1hbmFnZXIubW9iaWxlcHJvdmlkZXJzKCkpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIuZ2V0KCcvbW9iaWxlL3Byb3ZpZGVycy9jb3VudHJ5JywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICAgICAgICAgIGxldCBwcm92aWRlcnMgPSBOZXRNYW5hZ2VyLm1vYmlsZXByb3ZpZGVycygpO1xuICAgICAgICAgICAgcmVzLnNlbmQocHJvdmlkZXJzLmNvdW50cnkocmVxLmJvZHkuY291bnRyeSkpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIuZ2V0KCcvcmVjb3ZlcnknLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgTmV0TWFuYWdlci5yZWNvdmVyeSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgb2s6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIFJvdXRlci5wb3N0KCcvY29uZmlndXJhdGlvbicsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTWFuYWdlciBob21lIHBhZ2UnKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBSb3V0ZXIuZ2V0KCcvd2lmaS93cGEnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgbGV0IHdwYW1hbmFnZXIgPSBOZXRNYW5hZ2VyLndwYW1hbmFnZXIoKTtcbiAgICAgICAgICAgIHJlcy5zZW5kKHdwYW1hbmFnZXIubGlzdHdwYSk7XG5cblxuICAgICAgICB9KTtcbiAgICAgICAgUm91dGVyLnBvc3QoJy93aWZpL3dwYS9hZGQnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICAgICAgbGV0IHdwYW1hbmFnZXIgPSBOZXRNYW5hZ2VyLndwYW1hbmFnZXIoKTtcbiAgICAgICAgICAgIHdwYW1hbmFnZXIuYWRkd3BhKHJlcS5ib2R5LnNzaWQsIHJlcS5ib2R5LnBhc3N3b3JkLCByZXEuYm9keS5wcmlvcml0eSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG9rOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogZmFsc2UgfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH0pO1xuICAgICAgICBSb3V0ZXIucG9zdCgnL3dpZmkvd3BhL3JlbW92ZScsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgICAgICBsZXQgd3BhbWFuYWdlciA9IE5ldE1hbmFnZXIud3BhbWFuYWdlcigpO1xuICAgICAgICAgICAgd3BhbWFuYWdlci5yZW1vdmV3cGEocmVxLmJvZHkuc3NpZCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG9rOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBvazogZmFsc2UgfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBSb3V0ZXI7XG4gICAgfVxuXG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
